/*! For license information please see module.js.LICENSE.txt */
define(["react","d3","emotion","@grafana/ui","@grafana/data"],(function(t,e,n,r,a){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=5)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=a},function(t,e,n){"use strict";n.r(e);var r=n(4);var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,a,o=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(t){a={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i}function i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t}function l(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var s,u,c,f,p,d,m,h=n(0),x=n.n(h),b=n(2),g=n(1),w=n(3),y=Object(w.stylesFactory)((function(){return{wrapper:Object(b.css)(u||(u=l(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(b.css)(c||(c=l(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(b.css)(f||(f=l(["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "],["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "]))),line:Object(b.css)(p||(p=l(["\n      fill: none;\n      stroke: white;\n      stroke-width: 2px;\n    "],["\n      fill: none;\n      stroke: white;\n      stroke-width: 2px;\n    "]))),lineCutOff:Object(b.css)(d||(d=l(["\n      fill: none;\n      stroke: rgba(255, 0, 0, 0.75);\n      stroke-width: 2px;\n      stroke-dasharray: 5px;\n    "],["\n      fill: none;\n      stroke: rgba(255, 0, 0, 0.75);\n      stroke-width: 2px;\n      stroke-dasharray: 5px;\n    "]))),paths:Object(b.css)(m||(m=l(["\n      position: relative;\n    "],["\n      position: relative;\n    "])))}}));n.d(e,"plugin",(function(){return v}));var v=new r.PanelPlugin((function(t){var e=t.options,n=t.data,r=t.width,u=t.height,c=Object(w.useTheme)(),f=y(),p=e.vitalBreakpointVal,d=e.showVitalFew,m=e.showBottomAxis,h=o(n.series,1),v=o(h[0].fields,2),O=v[0],j=v[1].values.toArray(),k=j.reduce((function(t,e){return t+e}),0),E=O.values.toArray().map((function(t,e){return"T"+(e+1)})),B=j.map((function(t,e){return{x:E[e],y:t}})).sort((function(t,e){return e.y-t.y})).reduce((function(t,e,n){var r;return a(a({},t),{x:i(t.x,[e.x]),y:i(t.y,[e.y]),p:i(t.p,[((null===(r=t)||void 0===r?void 0:r.p[n-1])?t.p[n-1]:0)+100*e.y/k])})}),{x:[],y:[],p:[]}),P=g.max(B.y)||0,N=g.min(B.y)||0,S=u-40,V=r-40,F=g.scaleBand().rangeRound([0,V]).padding(e.barPadding),_=g.scaleLinear().rangeRound([S,0]),A=g.scaleLinear().rangeRound([S,0]),L=g.scaleBand().rangeRound([0,V]).padding(e.barPadding),M=g.line().x((function(t,e){return L(B.x[e])||0})).y((function(t,e){return S-t.p*S/100-20})),R=function(t,e){return 0!==e&&t&&t?100*t+"%":""},T=B.p.map((function(t,e){return{x:B.x[e]||"",p:t||0}}))||null,C=B.p.map((function(t,e){return{x:B.x[e]||"",p:p}}))||null,I=B.p[0]/B.p.length,X=!1;return F.domain(B.x),_.domain([N-I,P+I]),L.domain(B.x),x.a.createElement("div",{className:Object(b.cx)(f.wrapper,Object(b.css)(s||(s=l(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),r,u))},x.a.createElement("svg",{className:f.svg,width:r,height:u,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 "+r+" "+u},x.a.createElement("g",{transform:"translate(20, 20)",className:"wrapper"},x.a.createElement("g",{className:"bars",transform:"translate(20, 0)"},B.y.map((function(t,e){var n=F(B.x[e])||0;return x.a.createElement(x.a.Fragment,null,x.a.createElement("rect",{x:n,y:_(t),width:F.bandwidth(),height:S-_(t),fill:B.p[e]>p?c.palette.redBase:c.palette.greenBase}),x.a.createElement(x.a.Fragment,null,B.p[e]>p&&d&&!X&&(X=!0,!0)&&x.a.createElement("line",{className:f.lineCutOff,transform:"translate(0, 0)",ref:function(t){g.select(t).attr("x1",n+F.bandwidth()/2).attr("x2",n+F.bandwidth()/2).attr("y1",0).attr("y2",S)}})))}))),x.a.createElement("g",{className:f.paths},x.a.createElement("path",{className:f.line,transform:"translate("+(20+F.bandwidth()/2)+", 20)",ref:function(t){g.select(t).datum(T).attr("d",(function(t){return M(t)}))}}),d&&x.a.createElement("path",{className:f.lineCutOff,transform:"translate("+(20+F.bandwidth()/2)+", 20)",ref:function(t){g.select(t).datum(C).attr("d",(function(t){return M(t)}))}})),x.a.createElement("g",{className:"axis"},m&&x.a.createElement("g",{transform:"translate(20, "+S+")",ref:function(t){g.select(t).call(g.axisBottom(F))}}),x.a.createElement("g",{transform:"translate(20, 0)",ref:function(t){g.select(t).call(g.axisLeft(_))}}),x.a.createElement("g",{transform:"translate("+(V+20)+", 0)",ref:function(t){g.select(t).call(g.axisLeft(A).ticks(5).tickFormat(R))}})))))})).setPanelOptions((function(t){return t.addBooleanSwitch({path:"showBottomAxis",name:"Show bottom axis?",defaultValue:!1}).addBooleanSwitch({path:"showVitalFew",name:"Show vital few line?",defaultValue:!0}).addNumberInput({path:"vitalBreakpointVal",name:"Vital few value (%)",defaultValue:80}).addNumberInput({path:"barPadding",name:"Bar padding",defaultValue:.2})}))}])}));
//# sourceMappingURL=module.js.map